<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Analyse – BinWatch</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #preview   {max-width:100%;height:auto;margin-bottom:1rem}
    .thumbnail {max-height:60px}
  </style>
</head>
<body class="bg-light text-dark">

<!-- ­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­ Navbar -->
<nav class="navbar navbar-expand-lg bg-success shadow sticky-top">
  <!-- … (inchangé) … -->
</nav>

<div class="container py-5">
  <h1 class="text-success mb-4">Module d’analyse</h1>
  <p>Téléversez une image, ajoutez des informations, puis laissez BinWatch analyser l’état de la poubelle.</p>

  <!-- ­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­ Upload form -->
  <form id="uploadForm" enctype="multipart/form-data">
    <div class="mb-3">
      <label for="imageInput" class="form-label">Téléverser une image :</label>
      <input class="form-control" type="file" id="imageInput" name="image" accept="image/*" required>
    </div>

    <!-- Aperçu + annotation -->
    <div id="imageContainer" class="mb-3 d-none">
      <p class="fw-bold">Aperçu :</p>
      <img id="preview" class="img-fluid border">
      <div class="mt-2">
        <!-- les deux boutons ont le même style au départ -->
        <button type="button" id="btnPleine" class="btn btn-outline-success me-2">Annoter : Pleine</button>
        <button type="button" id="btnVide"   class="btn btn-outline-success">Annoter : Vide</button>
      </div>
    </div>

    <!-- Questionnaire -->
    <div id="detailsContainer" class="mb-3 d-none">
      <!-- … (inchangé) … -->
      <input type="hidden" id="annotationField" name="annotation">
    </div>

    <button type="submit" class="btn btn-success mt-3 d-none" id="analyzeButton">Analyser</button>
  </form>

  <!-- Historique -->
  <!-- … (inchangé) … -->
</div>

<footer class="bg-success text-white py-4 text-center">
  © 2025 BinWatch
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  /* éléments DOM réutilisés partout */
  const btnPleine       = document.getElementById('btnPleine');
  const btnVide         = document.getElementById('btnVide');
  const annotationField = document.getElementById('annotationField');
  const detailsContainer= document.getElementById('detailsContainer');
  const analyzeButton   = document.getElementById('analyzeButton');

  /* ------------------------------------------------------------------ */
  /* Sélection visuelle du bouton                                        */
  function setActive(selected, other){
    selected.classList.remove ('btn-outline-success');
    selected.classList.add    ('btn-success','text-white');

    other   .classList.remove ('btn-success','text-white');
    other   .classList.add    ('btn-outline-success');
  }

  /* ------------------------------------------------------------------ */
  /* affichage du questionnaire + mise à jour de la valeur cachée        */
  function showQuestionnaire(value){
    annotationField.value = value;
    detailsContainer.classList.remove('d-none');
    analyzeButton  .classList.remove('d-none');
  }

  /* ------------------------------------------------------------------ */
  /* Initialisation après chargement du DOM                              */
  window.addEventListener('load', ()=>{

    /* ---- boutons Pleine / Vide ------------------------------------- */
    btnPleine.addEventListener('click', ()=>{
      showQuestionnaire('Pleine');
      setActive(btnPleine, btnVide);
    });

    btnVide  .addEventListener('click', ()=>{
      showQuestionnaire('Vide');
      setActive(btnVide, btnPleine);
    });

    /* ---- le reste de ton code (upload, historique, auth, etc.) ----- */
    // … tout le JS déjà présent reste inchangé …
  });
</script>
</body>
</html>
